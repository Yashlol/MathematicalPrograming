<!DOCTYPE html>
<html>
<head>
    <title>Solve Linear Programming Problem</title>
    <script>
        async function submitForm(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const response = await fetch("{% url 'solve_linear_program' %}", {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}'
                }
            });

            const result = await response.json();
            const resultDiv = document.getElementById('result');

            if (response.ok) {
                resultDiv.innerHTML = `
                    <h2>Optimal Solution</h2>
                    <p>Optimal Point: ${result.optimal_point}</p>
                    <p>Optimal Value: ${result.optimal_value}</p>
                    <img src="data:image/png;base64,${result.graph}" alt="Solution Graph">
                `;
            } else {
                resultDiv.innerHTML = `<p style="color:red;">Error: ${result.error}</p>`;
            }
        }
    </script>
</head>
<body>
    <h1>Enter the Problem Details</h1>
    <form onsubmit="submitForm(event)">
        <label for="objective_function">Objective Function (comma-separated coefficients):</label><br>
        <input type="text" id="objective_function" name="objective_function" required><br><br>

        <label>Constraints (Left-hand side):</label><br>
        <textarea name="constraints_left" required></textarea><br><br>

        <label>Constraints (Right-hand side):</label><br>
        <textarea name="constraints_right" required></textarea><br><br>

        <input type="hidden" name="method" value="{{ request.GET.method }}">
        <button type="submit">Solve</button>
    </form>
    <div id="result"></div>
</body>
</html>
